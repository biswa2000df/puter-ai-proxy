<html>
<head>
    <title>Puter AI Proxy</title>
   
</head>
<body>
<script src="https://js.puter.com/v2/"></script>
<script>
    async function runAiPromptFromUrl() {
        // 1. Get the query parameters from the window's URL
        const urlParams = new URLSearchParams(window.location.search);

        // 2. Get the specific 'prompt' and 'model' values
        const prompt = urlParams.get('prompt');
        const model = urlParams.get('model');

        // 3. Check if a prompt was provided.
        if (!prompt) {
            puter.print("Error: No 'prompt' parameter found in the URL.");
            return;
        }

        // 4. Create the options object
        const aiOptions = {
            stream: false
        };

        // 5. If a model was provided in the URL, add it to the options
        if (model) {
            aiOptions.model = model;
        }

        // 6. Call the AI
        try {
            const response = await puter.ai.chat(
                prompt,
                aiOptions
            );

            // This is the ONLY line that prints on success
            puter.print(response.message.content);

        } catch (error) {
            console.error("Error fetching AI response:", error);
            puter.print("Error: " + error.message);
        }
    }

    // Run the function as soon as the page loads
    runAiPromptFromUrl();
</script>
</body>
</html>
