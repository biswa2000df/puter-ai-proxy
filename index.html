<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Puter AI API Simplified</title>
    <script src="https://js.puter.com/v2/"></script>
</head>
<body>
<pre id="output">Initializing...</pre>

<script>
    async function run() {
        const outputEl = document.getElementById('output');

        // Parse URL params
        const params = new URLSearchParams(window.location.search);
        const prompt = params.get('prompt');
        const model = params.get('model') || 'meta-llama/llama-4-maverick';

        if (!prompt) {
            outputEl.textContent = JSON.stringify({
                success: false,
                error: "No prompt provided. Use ?prompt=YOUR_TEXT&model=MODEL_NAME"
            }, null, 2);
            return;
        }

        try {
            // Wait a moment for SDK to load
            await new Promise(r => setTimeout(r, 500));

            const response = await puter.ai.chat(prompt, { model });

            const result = {
                success: true,
                response: response.message.content,
                model: model,
                timestamp: new Date().toISOString()
            };

            outputEl.textContent = JSON.stringify(result, null, 2);

        } catch (err) {
            outputEl.textContent = JSON.stringify({
                success: false,
                error: err.message,
                timestamp: new Date().toISOString()
            }, null, 2);
        }
    }

    run();
</script>
</body>
</html>
